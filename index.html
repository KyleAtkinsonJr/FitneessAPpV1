<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fitness Tracker</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap" rel="stylesheet">
  <link rel="manifest" href="manifest.json">
  <style>
    body { font-family: 'Inter', sans-serif; background: #F6F8FC; color: #232946; }
    .card { background: linear-gradient(135deg, #4F8CFF 0%, #FFB86C 100%); color: #fff; border-radius: 1.5rem; padding: 2rem; margin-bottom: 2rem; }
    .progress-bar { background: #E0E0E0; border-radius: 1rem; height: 12px; width: 100%; margin-top: 1rem; }
    .progress { background: #4F8CFF; height: 12px; border-radius: 1rem; transition: width 0.5s; }
    .workout-list { background: #fff; border-radius: 1.5rem; padding: 2rem; margin-bottom: 2rem; }
    .exercise { background: #F6F8FC; border-left: 4px solid #4F8CFF; border-radius: 1rem; margin-bottom: 1rem; padding: 1rem; }
    .done { border-color: #3DDC97; text-decoration: line-through; color: #94989A; }
    .btn { background: #4F8CFF; color: #fff; border: none; border-radius: 1rem; padding: 0.5rem 1rem; cursor: pointer; font-weight: bold; }
    .btn.done { background: #3DDC97; }
    .note { width: 100%; border-radius: 0.5rem; border: 1px solid #E0E0E0; padding: 0.5rem; margin-top: 0.5rem; }
  </style>
</head>
<body>
  <div id="root"></div>
  <script>
    // --- Data ---
    const MOTIVATION_QUOTES = [
      "The only bad workout is the one that didn't happen.",
      "Success isn't always about greatness. It's about consistency. Consistent hard work gains success. Greatness will come.",
      "Believe you can and you're halfway there.",
      "Your body can stand almost anything. It's your mind that you have to convince.",
      "The pain you feel today will be the strength you feel tomorrow.",
      "Don't wish for it, work for it.",
      "Strength does not come from physical capacity. It comes from an indomitable will.",
      "Today's actions are tomorrow's results.",
      "Push yourself because no one else is going to do it for you.",
      "The only way to define your limits is by going beyond them.",
    ];

    const WORKOUT_PLAN = [
      {
        name: "Barbell Squats",
        sets: 3,
        reps: 10,
        id: "squat",
        videoUrl: "https://www.youtube.com/watch?v=62bDZajYJm0"
      },
      {
        name: "Romanian Deadlifts",
        sets: 3,
        reps: 10,
        id: "rdl",
        videoUrl: "https://www.youtube.com/watch?v=IWygEz3U4UE"
      }
      // Add more exercises as needed
    ];

    // --- State ---
    let workoutStatus = JSON.parse(localStorage.getItem('workoutStatus') || '{}');

    // --- Helper Functions ---
    function getRandomQuote() {
      const today = new Date().toISOString().split('T')[0];
      let lastQuoteDate = localStorage.getItem('lastQuoteDate');
      let currentQuote = localStorage.getItem('currentQuote');
      if (!lastQuoteDate || lastQuoteDate !== today || !currentQuote) {
        const idx = Math.floor(Math.random() * MOTIVATION_QUOTES.length);
        currentQuote = MOTIVATION_QUOTES[idx];
        localStorage.setItem('lastQuoteDate', today);
        localStorage.setItem('currentQuote', currentQuote);
      }
      return currentQuote;
    }

    function saveStatus() {
      localStorage.setItem('workoutStatus', JSON.stringify(workoutStatus));
    }

    function getProgress() {
      let total = 0, completed = 0;
      WORKOUT_PLAN.forEach(ex => {
        for (let i = 0; i < ex.sets; i++) {
          total++;
          if (workoutStatus[ex.id] && workoutStatus[ex.id][i] && workoutStatus[ex.id][i].done) completed++;
        }
      });
      return { total, completed, percent: total ? Math.round(completed / total * 100) : 0 };
    }

    // --- Render Functions ---
    function render() {
      const root = document.getElementById('root');
      root.innerHTML = '';

      // Header & Quote
      const header = document.createElement('h1');
      header.textContent = '🏋️‍♀️ Fitness Energy';
      header.style.textAlign = 'center';
      header.style.fontSize = '2.5rem';
      header.style.fontWeight = '900';
      header.style.marginBottom = '1rem';
      root.appendChild(header);

      const quoteCard = document.createElement('div');
      quoteCard.className = 'card';
      quoteCard.innerHTML = `
        <h2 style="font-size:1.5rem;font-weight:800;">Keep It Up!</h2>
        <p style="font-size:1.1rem;font-weight:700;">${getRandomQuote()}</p>
        <span style="background:#3DDC97;color:#fff;padding:0.5rem 1rem;border-radius:1rem;font-weight:bold;float:right;">🔥 Streak: 5 days</span>
      `;
      root.appendChild(quoteCard);

      // Progress Overview
      const progress = getProgress();
      const progressCard = document.createElement('div');
      progressCard.className = 'workout-list';
      progressCard.innerHTML = `
        <h2 style="font-size:1.2rem;font-weight:800;color:#4F8CFF;">Progress Overview</h2>
        <div style="display:flex;gap:2rem;">
          <div><span style="font-size:2rem;color:#FF6B6B;font-weight:900;">${progress.percent}%</span><br><span style="color:#94989A;">Week Complete</span></div>
          <div><span style="font-size:2rem;color:#FFD93D;font-weight:900;">${progress.total - progress.completed}</span><br><span style="color:#94989A;">Workouts Left</span></div>
        </div>
        <div class="progress-bar"><div class="progress" style="width:${progress.percent}%;"></div></div>
      `;
      root.appendChild(progressCard);

      // Today's Workout
      const workoutCard = document.createElement('div');
      workoutCard.className = 'card';
      workoutCard.innerHTML = `<h2 style="font-size:1.5rem;font-weight:800;">Today's Workout</h2>
        <span>Completed ${progress.completed} of ${progress.total} sets</span>
        <div class="progress-bar"><div class="progress" style="width:${progress.percent}%;background:#3DDC97;"></div></div>
      `;
      // List exercises
      WORKOUT_PLAN.forEach(ex => {
        const exDiv = document.createElement('div');
        exDiv.className = 'exercise' + (isExerciseDone(ex) ? ' done' : '');
        exDiv.innerHTML = `
          <span style="font-weight:700;">${ex.name}</span>
          <a href="${ex.videoUrl}" target="_blank" style="margin-left:1rem;color:#4F8CFF;">🎥</a>
        `;
        // Sets
        for (let i = 0; i < ex.sets; i++) {
          const setDiv = document.createElement('div');
          setDiv.style.marginTop = '0.5rem';
          setDiv.innerHTML = `
            <label>Set ${i + 1} (${ex.reps} reps): </label>
            <input type="number" min="0" placeholder="Weight" style="width:60px;" value="${getWeight(ex.id, i)}">
            <button class="btn${isSetDone(ex) ? ' done' : ''}">${isSetDone(ex) ? 'Completed' : 'Confirm Set'}</button>
          `;
          // Set button handler
          setDiv.querySelector('button').onclick = () => {
            toggleSetDone(ex.id, i);
            render();
          };
          // Weight input handler
          setDiv.querySelector('input').onchange = (e) => {
            setWeight(ex.id, i, e.target.value);
            render();
          };
          exDiv.appendChild(setDiv);
        }
        // Notes
        const noteArea = document.createElement('textarea');
        noteArea.className = 'note';
        noteArea.placeholder = 'Add notes here...';
        noteArea.value = getNote(ex.id);
        noteArea.onchange = (e) => {
          setNote(ex.id, e.target.value);
          render();
        };
        exDiv.appendChild(noteArea);

        workoutCard.appendChild(exDiv);
      });

      root.appendChild(workoutCard);

      // Footer
      const footer = document.createElement('div');
      footer.style.textAlign = 'center';
      footer.style.color = '#94989A';
      footer.style.marginTop = '2rem';
      footer.innerHTML = '&copy; 2025 Fitness Energy. All rights reserved.';
      root.appendChild(footer);
    }

    // --- State Handlers ---
    function isSetDone(exId, setIdx) {
      return workoutStatus[exId] && workoutStatus[exId][setIdx] && workoutStatus[exId][setIdx].done;
    }
    function toggleSetDone(exId, setIdx) {
      if (!workoutStatus[exId]) workoutStatus[exId] = {};
      if (!workoutStatus[exId][setIdx]) workoutStatus[exId][setIdx] = {};
      workoutStatus[exId][setIdx].done = !workoutStatus[exId][setIdx].done;
      saveStatus();
    }
    function getWeight(exId, setIdx) {
      return workoutStatus[exId] && workoutStatus[exId][setIdx] ? (workoutStatus[exId][setIdx].weight || '') : '';
    }
    function setWeight(exId, setIdx, value) {
      if (!workoutStatus[exId]) workoutStatus[exId] = {};
      if (!workoutStatus[exId][setIdx]) workoutStatus[exId][setIdx] = {};
      workoutStatus[exId][setIdx].weight = value;
      saveStatus();
    }
    function getNote(exId) {
      return workoutStatus[exId] && workoutStatus[exId].note ? workoutStatus[exId].note : '';
    }
    function setNote(exId, value) {
      if (!workoutStatus[exId]) workoutStatus[exId] = {};
      workoutStatus[exId].note = value;
      saveStatus();
    }
    function isExerciseDone(ex) {
      for (let i = 0; i < ex.sets; i++) {
        if (!isSetDone(ex.id, i)) return false;
      }
      return true;
    }

    // --- Initial Render ---
    render();
  </script>
</body>
</html>